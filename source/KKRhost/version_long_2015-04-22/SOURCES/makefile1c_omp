SHELL = /bin/sh

include ./makeflags

SRAOBJS = $(OBJ)/cinit.o     $(OBJ)/csum.o      $(OBJ)/ioben.o \
          $(OBJ)/test.o      $(OBJ)/beshan.o    $(OBJ)/corel.o \
          $(OBJ)/cradwf.o    $(OBJ)/csimpk.o    $(OBJ)/csinwd.o \
          $(OBJ)/csout.o     $(OBJ)/hankel.o    $(OBJ)/intcor.o \
          $(OBJ)/intin.o     $(OBJ)/intout.o    $(OBJ)/irwns.o \
          $(OBJ)/irwsol.o    $(OBJ)/pnsqns.o    \
          $(OBJ)/regns.o     $(OBJ)/regsol.o    $(OBJ)/rhoin.o \
          $(OBJ)/rholm.o     $(OBJ)/rhons.o     $(OBJ)/rhoout.o \
          $(OBJ)/simp3.o     $(OBJ)/vllns.o     $(OBJ)/wfint.o \
          $(OBJ)/wfint0.o    $(OBJ)/wfmesh.o    $(OBJ)/wftsca.o \
          $(OBJ)/rinit.o     $(OBJ)/mapblock.o  $(OBJ)/opt.o    \
          $(OBJ)/ioinput.o   $(OBJ)/renorm_lly.o

COMOBJS = $(OBJ)/wrldos.o     $(OBJ)/wrmoms.o     $(OBJ)/rhocore.o \
          $(OBJ)/errortrap.o  $(OBJ)/calcrotmat.o $(OBJ)/wrmomssoc.o \
	  $(OBJ)/getscratch.o $(OBJ)/lngstring.o  $(OBJ)/densitymat.o \
          $(OBJ)/wrldaupot.o  $(OBJ)/overlap.o    $(OBJ)/wmatldau.o \
          $(OBJ)/interpolate_poten.o \
          $(OBJ)/interpolspline.o $(OBJ)/spline_real.o $(OBJ)/splint_real.o \
          $(OBJ)/rhoval0.o $(OBJ)/rhovalnew.o  $(OBJ)/vllmat.o     $(OBJ)/cheb.o\
          $(OBJ)/spinorbit_ham.o $(OBJ)/spin_orbit.o $(OBJ)/spin_orbit_compl.o \
          $(OBJ)/rotatespinframe.o $(OBJ)/vllmatsra.o $(OBJ)/beshank.o \
          $(OBJ)/rllsllsourceterms.o $(OBJ)/calcsph.o $(OBJ)/rllsll.o \
          $(OBJ)/chebint.o  $(OBJ)/rhooutnew.o  $(OBJ)/intcheb_cell.o \
          $(OBJ)/cheb2oldgrid.o $(OBJ)/orbitalmoment.o \
          $(OBJ)/rclm.o       $(OBJ)/mixldau.o

COMNONMPI = $(OBJ)/main1c.o     $(OBJ)/rhoval.o

MPIOBJ =    $(OBJ)/mpimain1c.o  $(OBJ)/mpirhoval.o

DRVOBJS =   $(OBJ)/drvcore.o    $(OBJ)/drvrho.o

RELOBJS = \
        $(OBJ)/ssite.o    $(OBJ)/rinvgj.o    $(OBJ)/dirac_bs.o   \
        $(OBJ)/dirbslag.o $(OBJ)/dirbsmid.o  $(OBJ)/dirbsrad.o   \
        $(OBJ)/dirbsrze.o $(OBJ)/dirbsstp.o  $(OBJ)/cjlz.o       \
        $(OBJ)/cnlz.o     $(OBJ)/cdjlzdz.o   $(OBJ)/cdnlzdz.o    \
        $(OBJ)/ikapmue.o  $(OBJ)/rnuctab.o   $(OBJ)/dirac_bi.o   \
        $(OBJ)/dirac_op.o $(OBJ)/dirac_soc.o $(OBJ)/dirac_soc2.o \
        $(OBJ)/cintabr.o  $(OBJ)/sumupint.o  $(OBJ)/cinthff.o    \
        $(OBJ)/cint4pts.o $(OBJ)/scfchrdns.o $(OBJ)/calcgf.o     \
        $(OBJ)/calccgc.o  $(OBJ)/ikmlin.o    $(OBJ)/rintsimp.o   \
        $(OBJ)/ylag.o     $(OBJ)/core.o      $(OBJ)/coredir.o    \
	$(OBJ)/hffcore.o  $(OBJ)/corehff.o   $(OBJ)/coreerr.o    \
	$(OBJ)/rint4pts.o $(OBJ)/calcmvec.o  $(OBJ)/amemagvec.o  \
        $(OBJ)/rmatstr.o  $(OBJ)/cmatstr.o   $(OBJ)/mvecglobal.o

PROGOBJS = $(COMNONMPI) $(COMOBJS) $(SRAOBJS) $(DRVOBJS) $(RELOBJS)

MPIOBJS = $(MPIOBJ) $(COMOBJS) $(SRAOBJS) $(DRVOBJS) $(RELOBJS)

setmpi:
	@if test ! -d MPI;\
	then mkdir MPI; fi
	rm -f $(OBJ)/mpi*.o
	cp -p inc.p   ./MPI/inc.p
	cp -p inc.cls ./MPI/inc.cls

mkdirobj:
	@if test ! -d $(OBJ); \
	then mkdir $(OBJ); fi

clean:
	@find . -name "*.o" -exec rm -f {} \;
copyinc:
	cp -p inc.p   $(SRA)/inc.p
	cp -p inc.p   $(COM)/inc.p
	cp -p inc.cls $(SRA)/inc.cls
	cp -p inc.cls $(COM)/inc.cls
	cp -p sprkkr_rmesh.dim   $(REL)/sprkkr_rmesh.dim

kkr : mkdirobj copyinc $(PROGOBJS)
	$(LD) -o $(BIN)/kkr1c.exe $(PROGOBJS) $(libs) 

kkrmpi : mkdirobj setmpi copyinc $(MPIOBJS)
	$(LDMPI) -o $(BIN)/kkr1c_mpi.exe $(MPIOBJS) $(libs) 

###################################################################
# rules expressing dependencies on Fortran files

##################### sources in SRA directory ##########

$(OBJ)/cinit.o      : $(SRA)/cinit.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/cinit.f -c -o $@

$(OBJ)/csum.o       : $(SRA)/csum.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/csum.f -c -o $@

$(OBJ)/ioben.o      : $(SRA)/ioben.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/ioben.f -c -o $@

$(OBJ)/test.o       : $(SRA)/test.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/test.f -c -o $@

$(OBJ)/beshan.o     : $(SRA)/beshan.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/beshan.f -c -o $@

$(OBJ)/corel.o      : $(SRA)/corel.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/corel.f -c -o $@

$(OBJ)/cradwf.o     : $(SRA)/cradwf.f $(INCP)         ; \
	              $(FC) $(FFLAGS) $(SRA)/cradwf.f -c -o $@

$(OBJ)/csimpk.o     : $(SRA)/csimpk.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/csimpk.f -c -o $@

$(OBJ)/csinwd.o     : $(SRA)/csinwd.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/csinwd.f -c -o $@

$(OBJ)/csout.o      : $(SRA)/csout.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/csout.f -c -o $@

$(OBJ)/hankel.o     : $(SRA)/hankel.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/hankel.f -c -o $@

$(OBJ)/intcor.o     : $(SRA)/intcor.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/intcor.f -c -o $@

$(OBJ)/intin.o      : $(SRA)/intin.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/intin.f -c -o $@

$(OBJ)/intout.o     : $(SRA)/intout.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/intout.f -c -o $@

$(OBJ)/irwns.o      : $(SRA)/irwns.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/irwns.f -c -o $@

$(OBJ)/irwsol.o     : $(SRA)/irwsol.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/irwsol.f -c -o $@

$(OBJ)/pnsqns.o     : $(SRA)/pnsqns.f $(INCP)          ; \
                      $(FC) $(FFLAGS) $(SRA)/pnsqns.f -c -o $@

$(OBJ)/regns.o      : $(SRA)/regns.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/regns.f -c -o $@

$(OBJ)/regsol.o     : $(SRA)/regsol.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/regsol.f -c -o $@

$(OBJ)/rhoin.o      : $(SRA)/rhoin.f  $(INCP)          ; \
                      $(FC) $(FFLAGS) $(SRA)/rhoin.f -c -o $@

$(OBJ)/rholm.o      : $(SRA)/rholm.f  $(INCP)          ; \
                      $(FC) $(FFLAGS) $(SRA)/rholm.f -c -o $@

$(OBJ)/rhons.o      : $(SRA)/rhons.f  $(INCP)          ; \
                      $(FC) $(FFLAGS) $(SRA)/rhons.f -c -o $@

$(OBJ)/rhoout.o     : $(SRA)/rhoout.f $(INCP)         ; \
                      $(FC) $(FFLAGS) $(SRA)/rhoout.f -c -o $@

$(OBJ)/renorm_lly.o : $(SRA)/renorm_lly.f             ; \
                      $(FC) $(FFLAGS) $(SRA)/renorm_lly.f -c -o $@

$(OBJ)/simp3.o      : $(SRA)/simp3.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/simp3.f -c -o $@

$(OBJ)/vllns.o      : $(SRA)/vllns.f  $(INCP)         ; \
                      $(FC) $(FFLAGS) $(SRA)/vllns.f -c -o $@

$(OBJ)/wfint.o      : $(SRA)/wfint.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/wfint.f -c -o $@

$(OBJ)/wfint0.o     : $(SRA)/wfint0.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/wfint0.f -c -o $@

$(OBJ)/wfmesh.o     : $(SRA)/wfmesh.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/wfmesh.f -c -o $@

$(OBJ)/wftsca.o     : $(SRA)/wftsca.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/wftsca.f -c -o $@

$(OBJ)/rinit.o      : $(SRA)/rinit.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/rinit.f -c -o $@

$(OBJ)/mapblock.o   : $(SRA)/mapblock.f                  ; \
                      $(FC) $(FFLAGS) $(SRA)/mapblock.f -c -o $@

$(OBJ)/opt.o         : $(SRA)/opt.f                 ; \
                        $(FC) $(FFLAGS) $(SRA)/opt.f -c -o $@

$(OBJ)/ioinput.o     : $(SRA)/ioinput.f                 ; \
                        $(FC) $(FFLAGS) $(SRA)/ioinput.f -c -o $@

##################### sources in COMMON directory ##########

$(OBJ)/main1c.o   : $(COM)/main1c.f  $(INCP) ; \
	            $(FC) $(FFLAGS) $(COM)/main1c.f -c -o $@

$(OBJ)/rhoval.o  : $(COM)/rhoval.f $(INCP)        ; \
	            $(FC) $(FFLAGS) $(COM)/rhoval.f -c -o $@

$(OBJ)/rhoval0.o  : $(COM)/rhoval0.f $(INCP)        ; \
	            $(FC) $(FFLAGS) $(COM)/rhoval0.f -c -o $@

$(OBJ)/rhocore.o  : $(COM)/rhocore.f $(INCP)        ; \
	            $(FC) $(FFLAGS) $(COM)/rhocore.f -c -o $@

$(OBJ)/wrldos.o   : $(COM)/wrldos.f                  ; \
                    $(FC) $(FFLAGS) $(COM)/wrldos.f -c -o $@

$(OBJ)/wrmoms.o   : $(COM)/wrmoms.f                  ; \
                    $(FC) $(FFLAGS) $(COM)/wrmoms.f -c -o $@

$(OBJ)/wrmomssoc.o   : $(COM)/wrmomssoc.f                  ; \
                    $(FC) $(FFLAGS) $(COM)/wrmomssoc.f -c -o $@

$(OBJ)/calcrotmat.o  : $(COM)/calcrotmat.f               ; \
                     $(FC) $(FFLAGS) $(COM)/calcrotmat.f -c -o $@

$(OBJ)/errortrap.o   : $(COM)/errortrap.f                ; \
                     $(FC) $(FFLAGS) $(COM)/errortrap.f -c -o $@

$(OBJ)/getscratch.o  : $(COM)/getscratch.f     ; \
	               $(FC) $(FFLAGS) $(COM)/getscratch.f -c -o $@

$(OBJ)/lngstring.o  : $(COM)/lngstring.f     ; \
                      $(FC) $(FFLAGS) $(COM)/lngstring.f -c -o $@

$(OBJ)/densitymat.o : $(COM)/densitymat.f  $(INCP)        ;\
                      $(FC) $(FFLAGS) $(COM)/densitymat.f  -c -o $@

$(OBJ)/wrldaupot.o  : $(COM)/wrldaupot.f                  ; \
                    $(FC) $(FFLAGS) $(COM)/wrldaupot.f -c -o $@

$(OBJ)/overlap.o    : $(COM)/overlap.f  $(INCP)        ;\
                     $(FC) $(FFLAGS) $(COM)/overlap.f  -c -o $@

$(OBJ)/wmatldau.o   : $(COM)/wmatldau.f $(INCP)        ;\
                     $(FC) $(FFLAGS) $(COM)/wmatldau.f  -c -o $@

$(OBJ)/mixldau.o    : $(COM)/mixldau.f $(INCP)        ;\
                     $(FC) $(FFLAGS) $(COM)/mixldau.f  -c -o $@
 

$(OBJ)/rclm.o       : $(COM)/rclm.f  $(INCP)        ;\
                     $(FC) $(FFLAGS) $(COM)/rclm.f  -c -o $@

$(OBJ)/interpolate_poten.o  : $(COM)/interpolate_poten.f $(INCP)        ; \
                    $(FC) $(FFLAGS) $(COM)/interpolate_poten.f -c -o $@

$(OBJ)/interpolspline.o  : $(COM)/interpolspline.f $(INCP)        ; \
                    $(FC) $(FFLAGS) $(COM)/interpolspline.f -c -o $@

$(OBJ)/spline_real.o  : $(COM)/spline_real.f $(INCP)        ; \
                    $(FC) $(FFLAGS) $(COM)/spline_real.f -c -o $@

$(OBJ)/splint_real.o  : $(COM)/splint_real.f $(INCP)        ; \
                    $(FC) $(FFLAGS) $(COM)/splint_real.f -c -o $@

$(OBJ)/rhovalnew.o       : $(COM)/rhovalnew.f  $(INCP)        ;\
                    $(FC) $(FFLAGS) $(OPENMPFLAGS) $(COM)/rhovalnew.f  -c -o $@

$(OBJ)/vllmat.o  : $(COM)/vllmat.f $(INCP)        ; \
                    $(FC) $(FFLAGS) $(COM)/vllmat.f -c -o $@

$(OBJ)/rotatespinframe.o  : $(COM)/rotatespinframe.f90    ; \
                    $(FC) $(FFLAGS) $(COM)/rotatespinframe.f90 -c -o $@

$(OBJ)/spinorbit_ham.o  : $(COM)/spinorbit_ham.f $(INCP)        ; \
                    $(FC) $(FFLAGS) $(OPENMPFLAGS) $(COM)/spinorbit_ham.f -c -o $@

$(OBJ)/spin_orbit.o  : $(COM)/spin_orbit.f $(INCP)        ; \
                    $(FC) $(FFLAGS) $(OPENMPFLAGS) $(COM)/spin_orbit.f -c -o $@

$(OBJ)/spin_orbit_compl.o  : $(COM)/spin_orbit_compl.f $(INCP)        ; \
                    $(FC) $(FFLAGS) $(OPENMPFLAGS) $(COM)/spin_orbit_compl.f -c -o $@

$(OBJ)/vllmatsra.o  : $(COM)/vllmatsra.f90 $(INCP)        ; \
                    $(FC) $(FFLAGS) $(OPENMPFLAGS) $(COM)/vllmatsra.f90 -c -o $@

$(OBJ)/beshank.o  : $(COM)/beshank.f $(INCP)        ; \
                    $(FC) $(FFLAGS) $(COM)/beshank.f -c -o $@

$(OBJ)/rllsllsourceterms.o  : $(COM)/rllsllsourceterms.f90 $(INCP)        ; \
                    $(FC) $(FFLAGS) $(OPENMPFLAGS) $(COM)/rllsllsourceterms.f90 -c -o $@

$(OBJ)/calcsph.o  : $(COM)/calcsph.f $(INCP)        ; \
                    $(FC) $(FFLAGS) $(OPENMPFLAGS) $(COM)/calcsph.f -c -o $@

$(OBJ)/rllsll.o  : $(COM)/rllsll.f90 $(INCP)        ; \
                    $(FC) $(FFLAGS) $(OPENMPFLAGS) $(COM)/rllsll.f90 -c -o $@

$(OBJ)/chebint.o  : $(COM)/chebint.f $(INCP)        ; \
                    $(FC) $(FFLAGS) $(COM)/chebint.f -c -o $@

$(OBJ)/rhooutnew.o  : $(COM)/rhooutnew.f $(INCP)        ; \
                    $(FC) $(FFLAGS) $(COM)/rhooutnew.f -c -o $@

$(OBJ)/intcheb_cell.o  : $(COM)/intcheb_cell.f90 $(INCP)        ; \
                    $(FC) $(FFLAGS) $(COM)/intcheb_cell.f90 -c -o $@

$(OBJ)/cheb2oldgrid.o  : $(COM)/cheb2oldgrid.f90 $(INCP)        ; \
                    $(FC) $(FFLAGS) $(COM)/cheb2oldgrid.f90 -c -o $@

$(OBJ)/orbitalmoment.o  : $(COM)/orbitalmoment.f90 $(INCP)        ; \
                    $(FC) $(FFLAGS) $(COM)/orbitalmoment.f90 -c -o $@
############################################################

##################### sources in DRV directory ##########

$(OBJ)/drvrho.o  : $(DRV)/drvrho.f     ; \
	             $(FC) $(FFLAGS) $(DRV)/drvrho.f -c -o $@

$(OBJ)/drvcore.o  : $(DRV)/drvcore.f   ; \
	             $(FC) $(FFLAGS) $(DRV)/drvcore.f -c -o $@

############################################################

##################### sources in REL directory ##########

$(OBJ)/ssite.o       : $(REL)/ssite.f                   ; \
	             $(FC) $(FFLAGS) $(REL)/ssite.f -c -o $@

$(OBJ)/rinvgj.o      : $(REL)/rinvgj.f                  ; \
	             $(FC) $(FFLAGS) $(REL)/rinvgj.f -c -o $@

$(OBJ)/dirac_bs.o    : $(REL)/dirac_bs.f  $(INCR)       ; \
	             $(FC) $(FFLAGS) $(REL)/dirac_bs.f -c -o $@

$(OBJ)/dirbslag.o    : $(REL)/dirbslag.f                ; \
	             $(FC) $(FFLAGS) $(REL)/dirbslag.f -c -o $@

$(OBJ)/dirbsrze.o    : $(REL)/dirbsrze.f                ; \
	             $(FC) $(FFLAGS) $(REL)/dirbsrze.f -c -o $@

$(OBJ)/dirbsrad.o    : $(REL)/dirbsrad.f  $(INCR)       ; \
	             $(FC) $(FFLAGS) $(REL)/dirbsrad.f -c -o $@

$(OBJ)/dirbsmid.o    : $(REL)/dirbsmid.f  $(INCR)       ; \
	             $(FC) $(FFLAGS) $(REL)/dirbsmid.f -c -o $@

$(OBJ)/dirbsstp.o    : $(REL)/dirbsstp.f  $(INCR)       ; \
	             $(FC) $(FFLAGS) $(REL)/dirbsstp.f -c -o $@

$(OBJ)/cjlz.o        : $(REL)/cjlz.f                    ; \
	             $(FC) $(FFLAGS) $(REL)/cjlz.f -c -o $@

$(OBJ)/cnlz.o        : $(REL)/cnlz.f                    ; \
	             $(FC) $(FFLAGS) $(REL)/cnlz.f -c -o $@

$(OBJ)/cdjlzdz.o     : $(REL)/cdjlzdz.f                 ; \
	             $(FC) $(FFLAGS) $(REL)/cdjlzdz.f -c -o $@

$(OBJ)/cdnlzdz.o     : $(REL)/cdnlzdz.f                 ; \
	             $(FC) $(FFLAGS) $(REL)/cdnlzdz.f -c -o $@

$(OBJ)/ikapmue.o     : $(REL)/ikapmue.f                 ; \
	             $(FC) $(FFLAGS) $(REL)/ikapmue.f -c -o $@

$(OBJ)/rnuctab.o     : $(REL)/rnuctab.f                 ; \
	             $(FC) $(FFLAGS) $(REL)/rnuctab.f -c -o $@

$(OBJ)/dirac_bi.o    : $(REL)/dirac_bi.f                ; \
	             $(FC) $(FFLAGS) $(REL)/dirac_bi.f -c -o $@

$(OBJ)/dirac_op.o    : $(REL)/dirac_op.f                ; \
	             $(FC) $(FFLAGS) $(REL)/dirac_op.f -c -o $@

$(OBJ)/dirac_soc.o   : $(REL)/dirac_soc.f               ; \
	             $(FC) $(FFLAGS) $(REL)/dirac_soc.f -c -o $@

$(OBJ)/dirac_soc2.o  : $(REL)/dirac_soc2.f              ; \
	             $(FC) $(FFLAGS) $(REL)/dirac_soc2.f -c -o $@

$(OBJ)/cintabr.o     : $(REL)/cintabr.f                 ; \
	             $(FC) $(FFLAGS) $(REL)/cintabr.f -c -o $@

$(OBJ)/sumupint.o    : $(REL)/sumupint.f                ; \
	             $(FC) $(FFLAGS) $(REL)/sumupint.f -c -o $@

$(OBJ)/cinthff.o     : $(REL)/cinthff.f                 ; \
	             $(FC) $(FFLAGS) $(REL)/cinthff.f -c -o $@

$(OBJ)/cint4pts.o    : $(REL)/cint4pts.f                ; \
	             $(FC) $(FFLAGS) $(REL)/cint4pts.f -c -o $@
$(OBJ)/scfchrdns.o   : $(REL)/scfchrdns.f               ; \
                     $(FC) $(FFLAGS) $(REL)/scfchrdns.f -c -o $@

$(OBJ)/calcgf.o      : $(REL)/calcgf.f               ; \
                     $(FC) $(FFLAGS) $(REL)/calcgf.f -c -o $@

$(OBJ)/calccgc.o     : $(REL)/calccgc.f               ; \
                     $(FC) $(FFLAGS) $(REL)/calccgc.f -c -o $@

$(OBJ)/ikmlin.o      : $(REL)/ikmlin.f               ; \
                     $(FC) $(FFLAGS) $(REL)/ikmlin.f -c -o $@

$(OBJ)/rintsimp.o    : $(REL)/rintsimp.f               ; \
                     $(FC) $(FFLAGS) $(REL)/rintsimp.f -c -o $@

$(OBJ)/ylag.o        : $(REL)/ylag.f               ; \
                     $(FC) $(FFLAGS) $(REL)/ylag.f -c -o $@

$(OBJ)/core.o        : $(REL)/core.f      ; \
                     $(FC) $(FFLAGS) $(REL)/core.f -c -o $@

$(OBJ)/coredir.o     : $(REL)/coredir.f   ; \
                     $(FC) $(FFLAGS) $(REL)/coredir.f -c -o $@

$(OBJ)/hffcore.o     : $(REL)/hffcore.f   ; \
                     $(FC) $(FFLAGS) $(REL)/hffcore.f -c -o $@

$(OBJ)/corehff.o     : $(REL)/corehff.f   ; \
                     $(FC) $(FFLAGS) $(REL)/corehff.f  -c -o $@

$(OBJ)/coreerr.o     : $(REL)/coreerr.f   ; \
                     $(FC) $(FFLAGS) $(REL)/coreerr.f  -c -o $@ 

$(OBJ)/rint4pts.o    : $(REL)/rint4pts.f  ; \
                     $(FC) $(FFLAGS) $(REL)/rint4pts.f -c -o $@

$(OBJ)/calcmvec.o    : $(REL)/calcmvec.f  ; \
                     $(FC) $(FFLAGS) $(REL)/calcmvec.f -c -o $@

$(OBJ)/amemagvec.o   : $(REL)/amemagvec.f  ; \
                     $(FC) $(FFLAGS) $(REL)/amemagvec.f -c -o $@

$(OBJ)/rmatstr.o     : $(REL)/rmatstr.f                ; \
	             $(FC) $(FFLAGS) $(REL)/rmatstr.f -c -o $@

$(OBJ)/mvecglobal.o  : $(REL)/mvecglobal.f                  ; \
	             $(FC) $(FFLAGS) $(REL)/mvecglobal.f -c -o $@

$(OBJ)/cmatstr.o     : $(REL)/cmatstr.f                ; \
	             $(FC) $(FFLAGS) $(REL)/cmatstr.f -c -o $@

############################################################

############################################################
#  MPI OBJECTS MPI MPI OBJECTS 
#
$(OBJ)/mpimain1c.o   : $(COM)/main1c.f $(INCP) 
	cat $(COM)/main1c.f | sed 's/CMPI /     /' > ./MPI/mpimain1c.f
	$(FC) $(FFLAGS) ./MPI/mpimain1c.f -c -o $@	

$(OBJ)/mpirhoval.o  : $(COM)/rhoval.f $(INCP)
	cat $(COM)/rhoval.f | sed 's/CMPI /     /' > ./MPI/mpirhoval.f
	$(FC) $(FFLAGS) ./MPI/mpirhoval.f -c -o $@

############################################################
