build_kkrimp:intel:hybrid:
  stage: build_kkrimp
  script:
    # compile code
    - mkdir build_kkrimp_hybrid && cd build_kkrimp_hybrid
    - FC=/usr/local/intel/compilers_and_libraries_2016.2.181/linux/mpi/intel64/bin/mpiifort cmake -DENABLE_MPI=ON -DENABLE_OMP=ON -DENABLE_COV=ON -DCOMPILE_KKRHOST=OFF -DCOMPILE_KKRIMP=ON -DCOMPILE_KKRSUSC=OFF -DCOMPILE_PKKPRIME=OFF -DCOMPILE_VORONOI=OFF ..
    - make -j4
    - cp kkrflex.exe ../tests/kkrflex.exe_hybrid
  artifacts:
    paths:
      - tests/kkrflex.exe_hybrid
    expire_in: 1 day

build_kkrimp:intel:mpi:
  stage: build_kkrimp
  script:
    # compile code
    - mkdir build_kkrimp_hybrid && cd build_kkrimp_hybrid
    - FC=/usr/local/intel/compilers_and_libraries_2016.2.181/linux/mpi/intel64/bin/mpiifort cmake -DENABLE_MPI=ON -DENABLE_OMP=ON -DENABLE_COV=ON -DCOMPILE_KKRHOST=OFF -DCOMPILE_KKRIMP=ON -DCOMPILE_KKRSUSC=OFF -DCOMPILE_PKKPRIME=OFF -DCOMPILE_VORONOI=OFF ..
    - make -j4
    - cp kkrflex.exe ../tests/kkrflex.exe_mpi
  artifacts:
    paths:
      - tests/kkrflex.exe_mpi
    expire_in: 1 day
